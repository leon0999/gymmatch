# GymMatch - Next Steps After Matching

## âœ… í˜„ì¬ ì™„ë£Œëœ ê¸°ëŠ¥
1. íšŒì›ê°€ì… (ì‹¤ì œ ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸)
2. ë¡œê·¸ì¸
3. í”„ë¡œí•„ ìƒì„± (5ë‹¨ê³„ ì˜¨ë³´ë”©)
4. Discover í˜ì´ì§€ (ìŠ¤ì™€ì´í”„ ë§¤ì¹­)
5. ìƒí˜¸ ë§¤ì¹­ ê°ì§€ (It's a match! ì•Œë¦¼)

---

## ğŸ¯ Phase 1: ë§¤ì¹­ í›„ í•µì‹¬ ê¸°ëŠ¥ (ìš°ì„ ìˆœìœ„ ë†’ìŒ)

### 1.1. Matches í˜ì´ì§€ (`/matches`)
**ëª©ì **: ë§¤ì¹­ëœ ì‚¬ëŒë“¤ ë¦¬ìŠ¤íŠ¸ ë³´ê¸°

**UI êµ¬ì„±**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Matches (5)                    ğŸ   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ‘¤ Alex, 20                   â”‚  â”‚
â”‚  â”‚ nyc â€¢ 1 mile away             â”‚  â”‚
â”‚  â”‚ ğŸ’¬ Start chatting!       [â†’]  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ‘¤ Sarah, 25                  â”‚  â”‚
â”‚  â”‚ brooklyn â€¢ 3 miles away       â”‚  â”‚
â”‚  â”‚ ğŸ’¬ Hey! When do you...   [â†’]  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê¸°ëŠ¥**:
- ë§¤ì¹­ëœ ì‚¬ëŒë“¤ ë¦¬ìŠ¤íŠ¸
- ìµœê·¼ ë©”ì‹œì§€ ë¯¸ë¦¬ë³´ê¸°
- í´ë¦­ ì‹œ ì±„íŒ… í˜ì´ì§€ë¡œ ì´ë™
- ë¹ˆ ìƒíƒœ: "No matches yet. Keep swiping!"

**ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬**:
```sql
SELECT
  m.*,
  p1.name, p1.age, p1.location_name, p1.photos,
  (SELECT message FROM messages
   WHERE match_id = m.id
   ORDER BY created_at DESC LIMIT 1) as last_message
FROM matches m
JOIN profiles p1 ON (p1.user_id = m.user2_id)
WHERE m.user1_id = {current_user_id}
  OR m.user2_id = {current_user_id}
ORDER BY m.matched_at DESC
```

---

### 1.2. Chat í˜ì´ì§€ (`/chat/[matchId]`)
**ëª©ì **: 1:1 ì‹¤ì‹œê°„ ì±„íŒ…

**UI êµ¬ì„±**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Alex, 20                     â‹®  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  ğŸ‘¤ Alex: Hey! Want to hit the     â”‚
â”‚           gym tomorrow?             â”‚
â”‚           10:30 AM                  â”‚
â”‚                                     â”‚
â”‚                      Sure! What    ğŸ‘¤â”‚
â”‚                      time works?    â”‚
â”‚                      10:32 AM       â”‚
â”‚                                     â”‚
â”‚  ğŸ‘¤ Alex: How about 6pm?           â”‚
â”‚           10:33 AM                  â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Type a message...          [Send]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê¸°ëŠ¥**:
- ì‹¤ì‹œê°„ ë©”ì‹œì§€ ì „ì†¡/ìˆ˜ì‹  (Supabase Realtime)
- ë©”ì‹œì§€ íƒ€ì„ìŠ¤íƒ¬í”„
- ì½ìŒ í‘œì‹œ (ì„ íƒì‚¬í•­)
- ì‚¬ì§„ ì „ì†¡ (Phase 2)
- Workout ì•½ì† ì œì•ˆ (Phase 2)

**ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ** (messages í…Œì´ë¸”):
```sql
CREATE TABLE messages (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  match_id UUID NOT NULL REFERENCES matches(id) ON DELETE CASCADE,
  sender_id UUID NOT NULL REFERENCES profiles(user_id) ON DELETE CASCADE,
  message TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  read_at TIMESTAMPTZ,

  INDEX idx_match_messages (match_id, created_at)
);

-- RLS ì •ì±…
CREATE POLICY "Users can read messages in their matches"
ON messages FOR SELECT
USING (
  match_id IN (
    SELECT id FROM matches
    WHERE user1_id = auth.uid() OR user2_id = auth.uid()
  )
);

CREATE POLICY "Users can send messages in their matches"
ON messages FOR INSERT
WITH CHECK (
  sender_id = auth.uid() AND
  match_id IN (
    SELECT id FROM matches
    WHERE user1_id = auth.uid() OR user2_id = auth.uid()
  )
);
```

---

### 1.3. ë§¤ì¹­ ì„±ê³µ ëª¨ë‹¬ ê°œì„ 
**í˜„ì¬**: `alert()` ì‚¬ìš©
**ê°œì„ **: í’€ìŠ¤í¬ë¦° ëª¨ë‹¬ + ì• ë‹ˆë©”ì´ì…˜

**UI êµ¬ì„±**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚         âœ¨ It's a Match! âœ¨         â”‚
â”‚                                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”        â”‚
â”‚    â”‚ You  â”‚   â¤ï¸   â”‚ Alex â”‚        â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                     â”‚
â”‚    You and Alex both liked          â”‚
â”‚    each other!                      â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   ğŸ’¬ Send a Message         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Keep Swiping              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê¸°ëŠ¥**:
- Framer Motion ì• ë‹ˆë©”ì´ì…˜
- "Send a Message" â†’ ì±„íŒ… í˜ì´ì§€ë¡œ ì´ë™
- "Keep Swiping" â†’ ë‹¤ìŒ í”„ë¡œí•„

---

## ğŸ¨ Phase 2: UX ê°œì„  (ìš°ì„ ìˆœìœ„ ì¤‘ê°„)

### 2.1. ì˜¨ë³´ë”© UX ê°œì„ 
**í˜„ì¬ ë¬¸ì œ**:
- Step 1ì— ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ + ê¸°ë³¸ì •ë³´ ëª¨ë‘ ìˆìŒ
- ë„ˆë¬´ ë§ì€ ì •ë³´ ìš”êµ¬

**ê°œì„ ì•ˆ**:
```
Step 0: ê³„ì • ìƒì„± (ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ë§Œ)
  â†“
Step 1: ê¸°ë³¸ ì •ë³´ (ì´ë¦„, ë‚˜ì´, ì„±ë³„, ìœ„ì¹˜)
  â†“
Step 2: í”¼íŠ¸ë‹ˆìŠ¤ í”„ë¡œí•„
  â†“
Step 3: ìŠ¤ì¼€ì¤„
  â†“
Step 4: ë°”ì´ì˜¤
  â†“
Step 5: ì„ í˜¸ë„
```

**Step 0 ë””ìì¸**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚         Welcome to GymMatch! ğŸ‘‹     â”‚
â”‚                                     â”‚
â”‚    Find your perfect gym partner    â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Email Address               â”‚   â”‚
â”‚  â”‚ your@email.com              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Password (min 6 chars)      â”‚   â”‚
â”‚  â”‚ â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   Continue â†’                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  Already have an account? Log In    â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2. ë¡œê·¸ì¸ í˜ì´ì§€ ê°œì„ 
**ì¶”ê°€ ê¸°ëŠ¥**:
- "Remember me" ì²´í¬ë°•ìŠ¤
- "Forgot password?" ë§í¬ (Phase 3)
- ì†Œì…œ ë¡œê·¸ì¸ (Google/Apple) (Phase 3)

### 2.3. í™ˆí˜ì´ì§€ ê°œì„ 
**ë¡œê·¸ì¸ í›„**:
- ìµœê·¼ ë§¤ì¹­ëœ ì‚¬ëŒ 3ëª… ë¯¸ë¦¬ë³´ê¸°
- "New Match!" ë°°ì§€
- ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ì¹´ìš´íŠ¸

---

## ğŸš€ Phase 3: ê³ ê¸‰ ê¸°ëŠ¥ (ìš°ì„ ìˆœìœ„ ë‚®ìŒ)

### 3.1. Workout ì•½ì† ê¸°ëŠ¥
- ì±„íŒ…ì—ì„œ "Let's workout!" ë²„íŠ¼
- ë‚ ì§œ/ì‹œê°„/ì¥ì†Œ ì„ íƒ
- ìº˜ë¦°ë” ë™ê¸°í™”
- ë¦¬ë§ˆì¸ë” ì•Œë¦¼

### 3.2. í”„ë¡œí•„ ìˆ˜ì •
- `/settings` í˜ì´ì§€
- í”„ë¡œí•„ ì‚¬ì§„ ì—…ë¡œë“œ
- ë°”ì´ì˜¤ ìˆ˜ì •
- ì„ í˜¸ë„ ì—…ë°ì´íŠ¸

### 3.3. ì•Œë¦¼ ì‹œìŠ¤í…œ
- ìƒˆë¡œìš´ ë§¤ì¹­ ì•Œë¦¼
- ë©”ì‹œì§€ ë„ì°© ì•Œë¦¼
- Workout ë¦¬ë§ˆì¸ë”
- Push Notifications (PWA)

### 3.4. í”„ë¦¬ë¯¸ì—„ ê¸°ëŠ¥
- ë¬´ì œí•œ ìŠ¤ì™€ì´í”„ (ë¬´ë£Œ: 10/ì¼)
- "Who liked you" ë³´ê¸°
- ë” ì •êµí•œ í•„í„°
- í”„ë¡œí•„ ë¶€ìŠ¤íŠ¸

### 3.5. ë¦¬ë·° ì‹œìŠ¤í…œ
- Workout í›„ ìƒëŒ€ë°© í‰ê°€
- ì‹ ë¢°ë„ ì ìˆ˜
- ë…¸ì‡¼ ë°©ì§€

---

## ğŸ“± Phase 4: ë„¤ë¹„ê²Œì´ì…˜ ë°”

**ê³ ì • í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚         [Content Area]              â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ       â¤ï¸      ğŸ’¬      ğŸ‘¤         â”‚
â”‚  Home  Discover Matches Profile     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì•„ì´ì½˜**:
- ğŸ  Home: ëŒ€ì‹œë³´ë“œ
- â¤ï¸ Discover: ìŠ¤ì™€ì´í”„
- ğŸ’¬ Matches: ë§¤ì¹­ ë¦¬ìŠ¤íŠ¸ (ë°°ì§€: ì½ì§€ ì•Šì€ ë©”ì‹œì§€)
- ğŸ‘¤ Profile: ë‚´ í”„ë¡œí•„

---

## ğŸ—‚ï¸ ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì „ì²´

### ê¸°ì¡´ í…Œì´ë¸”
```sql
-- profiles (ì™„ë£Œ)
-- swipes (ì™„ë£Œ)
-- matches (ì™„ë£Œ)
```

### ì¶”ê°€ í•„ìš” í…Œì´ë¸”
```sql
-- messages (ì±„íŒ…)
CREATE TABLE messages (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  match_id UUID NOT NULL REFERENCES matches(id),
  sender_id UUID NOT NULL REFERENCES profiles(user_id),
  message TEXT NOT NULL,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  read_at TIMESTAMPTZ
);

-- workouts (ìš´ë™ ì•½ì†) - Phase 3
CREATE TABLE workouts (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  match_id UUID NOT NULL REFERENCES matches(id),
  scheduled_at TIMESTAMPTZ NOT NULL,
  location TEXT,
  status TEXT DEFAULT 'pending', -- pending, confirmed, completed, cancelled
  created_by UUID NOT NULL REFERENCES profiles(user_id),
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- reviews (ë¦¬ë·°) - Phase 3
CREATE TABLE reviews (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  workout_id UUID NOT NULL REFERENCES workouts(id),
  reviewer_id UUID NOT NULL REFERENCES profiles(user_id),
  reviewee_id UUID NOT NULL REFERENCES profiles(user_id),
  rating INTEGER CHECK (rating BETWEEN 1 AND 5),
  comment TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW(),
  UNIQUE(workout_id, reviewer_id)
);
```

---

## ğŸ¯ ìš°ì„ ìˆœìœ„ ìš”ì•½

**ì´ë²ˆ ì£¼ (Phase 1)**:
1. âœ… Matches ë¦¬ìŠ¤íŠ¸ í˜ì´ì§€
2. âœ… Chat 1:1 ì±„íŒ…
3. âœ… ë§¤ì¹­ ì„±ê³µ ëª¨ë‹¬
4. âœ… í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°”

**ë‹¤ìŒ ì£¼ (Phase 2)**:
1. ì˜¨ë³´ë”© ë¶„ë¦¬ (Step 0)
2. ì½ì§€ ì•Šì€ ë©”ì‹œì§€ ë°°ì§€
3. í”„ë¡œí•„ ì‚¬ì§„ ì—…ë¡œë“œ

**ë‚˜ì¤‘ì— (Phase 3)**:
1. Workout ì•½ì†
2. ì•Œë¦¼ ì‹œìŠ¤í…œ
3. í”„ë¦¬ë¯¸ì—„ ê¸°ëŠ¥

---

**ì‘ì„±ì¼**: 2025-01-10
**ì‘ì„±ì**: Claude + ë°•ì¬í˜„
